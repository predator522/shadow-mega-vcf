<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shadow VCF Session</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700&display=swap');
:root {
  --neon-purple: #bc13fe;
  --neon-silver: #e2e2e2;
  --neon-cyan: #00ffff;
  --dark-bg: #0a0a0a;
  --darker-bg: #050505;
  --input-bg: #111111;
}
body { font-family: 'Orbitron', sans-serif; margin:0; padding:20px; background:var(--dark-bg); color:var(--neon-silver); text-align:center; min-height:100vh; position:relative; overflow-x:hidden;}
body::before { content:''; position:absolute; top:0; left:0; width:100%; height:100%; background:linear-gradient(rgba(11,0,20,0.7), rgba(5,0,10,0.9)); z-index:-1;}
h1 { font-size:2.2em; margin-bottom:15px; text-shadow:0 0 10px var(--neon-purple),0 0 20px var(--neon-purple); color:var(--neon-silver); letter-spacing:1px;}
p { margin:8px 0; font-size:0.95em; line-height:1.4;}
.progress-container { width:90%; max-width:500px; background:var(--darker-bg); border-radius:15px; margin:20px auto; overflow:hidden; border:1px solid rgba(188,19,254,0.3); box-shadow:0 0 10px rgba(188,19,254,0.2);}
.progress-bar { height:18px; width:0%; background:linear-gradient(to right, var(--neon-purple), #8a2be2); box-shadow:0 0 10px var(--neon-purple); transition:width 0.5s ease;}
input { width:90%; max-width:400px; padding:15px 20px; margin:15px auto; font-size:1.1em; border-radius:8px; border:1px solid rgba(188,19,254,0.5); background:var(--input-bg); color:var(--neon-silver); display:block; font-family:'Orbitron', sans-serif; transition:all 0.3s ease;}
input:focus { outline:none; border-color:var(--neon-purple); box-shadow:0 0 10px rgba(188,19,254,0.5);}
input::placeholder { color:#666;}
button { width:90%; max-width:400px; padding:15px 20px; margin:20px auto; font-size:1.1em; border-radius:8px; border:none; background:linear-gradient(to right, var(--neon-purple), #8a2be2); color:#fff; cursor:pointer; display:block; font-weight:bold; font-family:'Orbitron',sans-serif; letter-spacing:1px; text-shadow:0 0 5px rgba(0,0,0,0.5); box-shadow:0 0 15px rgba(188,19,254,0.4); transition:all 0.3s ease; position:relative; overflow:hidden;}
button::before { content:''; position:absolute; top:-2px; left:-2px; right:-2px; bottom:-2px; background:linear-gradient(45deg, var(--neon-purple), var(--neon-cyan), var(--neon-purple)); z-index:-1; border-radius:10px; background-size:400%; animation:glowing 20s linear infinite; opacity:0; transition:opacity 0.3s ease;}
button:hover::before { opacity:1;}
button:hover { transform:translateY(-2px); box-shadow:0 0 20px rgba(188,19,254,0.6);}
@keyframes glowing { 0%{background-position:0 0;}50%{background-position:400% 0;}100%{background-position:0 0;} }
#countDisplay { font-weight:bold; color:var(--neon-silver); margin:15px 0; font-size:1.1em;}
.pulse { animation:pulse 2s infinite;}
@keyframes pulse {0%{opacity:0.7;}50%{opacity:1;}100%{opacity:0.7;}}
.share-link { margin:15px auto; padding:10px; background:rgba(25,0,45,0.5); border-radius:8px; border:1px solid rgba(188,19,254,0.3); max-width:400px; word-break:break-all; cursor:pointer; transition:all 0.3s ease;}
.share-link:hover { background:rgba(35,0,65,0.5); box-shadow:0 0 10px rgba(188,19,254,0.3);}
.loading { opacity:0.7; pointer-events:none;}
@keyframes neonPulse { 0%{box-shadow:0 0 10px rgba(188,19,254,0.5),0 0 20px rgba(188,19,254,0.3);}50%{box-shadow:0 0 25px rgba(188,19,254,0.7),0 0 40px rgba(188,19,254,0.5);}100%{box-shadow:0 0 10px rgba(188,19,254,0.5),0 0 20px rgba(188,19,254,0.3);}}
.group-button-container { margin:25px 0; }
.group-card-button { display:block; width:90%; max-width:450px; margin:0 auto 20px auto; padding:20px; font-size:1.2em; font-weight:bold; text-align:center; border-radius:15px; background:linear-gradient(to right, var(--neon-purple), #8a2be2); color:#fff; text-decoration:none; position:relative; overflow:hidden; animation:neonPulse 2.5s infinite; transition:all 0.3s ease;}
.group-card-button::before { content:''; position:absolute; top:-2px; left:-2px; right:-2px; bottom:-2px; background:linear-gradient(45deg, var(--neon-purple), var(--neon-cyan), var(--neon-purple)); z-index:-1; border-radius:15px; background-size:400%; animation:glowing 15s linear infinite; opacity:0; transition:opacity 0.3s ease;}
.group-card-button:hover::before { opacity:1;}
.group-card-button:hover { transform:translateY(-3px); box-shadow:0 0 30px rgba(188,19,254,0.7);}
.links-container { display:flex; justify-content:center; flex-wrap:wrap; margin:20px 0; gap:15px;}
.square-link-button { display:inline-block; width:160px; padding:15px; border-radius:12px; background:rgba(25,0,45,0.5); border:1px solid rgba(188,19,254,0.3); color:var(--neon-silver); text-decoration:none; font-weight:bold; text-align:center; box-shadow:0 0 10px rgba(188,19,254,0.2); transition:all 0.3s ease;}
.square-link-button:hover { background:rgba(35,0,65,0.5); box-shadow:0 0 15px rgba(188,19,254,0.3); color:#fff; transform:translateY(-2px);}
.footer { margin-top:40px; font-size:0.85em; color:var(--neon-silver); opacity:0.7;}
.footer p { margin:5px 0;}
.message { font-weight:bold; margin-top:15px; color:var(--neon-cyan); text-shadow:0 0 5px var(--neon-cyan); min-height:24px;}
@media (max-width:600px){ h1{font-size:1.8em;} input, button{padding:12px 15px; font-size:1em;} .square-link-button{width:45%; margin:10px 5px;} }
</style>
</head>
<body>

<h1>Welcome to Shadow VCF</h1>
<p id="sessionInfo">Upload only your WhatsApp contact here. Must begin with "+" followed by country code and number.</p>

<p id="countDisplay">0 contacts uploaded</p>
<div class="progress-container"><div class="progress-bar" id="progressBar"></div></div>

<input type="text" id="sessionID" placeholder="Enter Session ID">
<input type="text" id="participantName" placeholder="Full Name">
<input type="text" id="participantNumber" placeholder="+1234567890">
<button id="joinSessionBtn">Upload Contact</button>
<p class="message" id="participantMessage"></p>

<div id="shareSection" style="display:none;">
  <p>Share this link with others to join this session:</p>
  <div class="share-link" id="shareLink">Click to copy</div>
</div>

<div class="group-button-container">
  <a id="groupLinkBtn" href="#" target="_blank" class="group-card-button">Join the VCF Group</a>
</div>

<div class="links-container">
  <a href="https://whatsapp.com/channel/0029VbB4AeoF1YlZVNDXUe2v" target="_blank" class="square-link-button">Follow our WhatsApp Channel</a>
  <a href="https://chat.whatsapp.com/Lr2Tzrf19kaJgWg5ODKzq6?mode=ems_copy_t" target="_blank" class="square-link-button">Join our WhatsApp Group</a>
</div>

<div class="footer">
  <p>powered by F̸A̸C̸ ShΔdow</p>
</div>

<script>
const JSONBIN_API_KEY='$2a$10$Jc3hx0ec4YQpi3NdJ9K/RuiP.1qu6idBoumzfm.cL4VzpIJ2.OW1q';
const JSONBIN_BASE_URL='https://api.jsonbin.io/v3/b';
const progressBar=document.getElementById('progressBar');
const countDisplay=document.getElementById('countDisplay');
const groupLinkBtn=document.getElementById('groupLinkBtn');
const sessionInfo=document.getElementById('sessionInfo');
const shareSection=document.getElementById('shareSection');
const shareLink=document.getElementById('shareLink');
const joinSessionBtn=document.getElementById('joinSessionBtn');

function getUrlParameter(name){ name=name.replace(/[\[\]]/g,'\\$&'); const regex=new RegExp('[?&]'+name+'(=([^&#]*)|&|#|$)'); const results=regex.exec(window.location.href); if(!results) return null; if(!results[2]) return ''; return decodeURIComponent(results[2].replace(/\+/g,' '));}

const urlSessionID=getUrlParameter('session');
if(urlSessionID){ document.getElementById('sessionID').value=urlSessionID; document.getElementById('sessionID').disabled=true; sessionInfo.textContent="You're joining session: "+urlSessionID; shareSection.style.display='block'; shareLink.textContent=window.location.href.split('?')[0]+'?session='+urlSessionID; loadSessionData(urlSessionID);}

async function loadSessionData(sessionID){
  try{ showLoading(true);
    const response=await fetch(`${JSONBIN_BASE_URL}/${sessionID}`,{headers:{'X-Master-Key':JSONBIN_API_KEY}});
    if(!response.ok) throw new Error('Session not found');
    const data=await response.json();
    const session=data.record;
    updateProgress(session);
    if(session.groupLink) groupLinkBtn.href=session.groupLink;
  } catch(e){ document.getElementById('participantMessage').textContent="Invalid session ID or network error"; console.error(e);}
  finally{ showLoading(false);}
}

function updateProgress(session){
  const percent=Math.floor((session.participants.length/session.maxParticipants)*100);
  progressBar.style.width=percent+'%';
  countDisplay.textContent=`${session.participants.length} contacts in VCF`;
  countDisplay.classList.add('pulse');
  setTimeout(()=>countDisplay.classList.remove('pulse'),1000);
}

async function updateSession(sessionID,sessionData){
  const response=await fetch(`${JSONBIN_BASE_URL}/${sessionID}`,{method:'PUT', headers:{'Content-Type':'application/json','X-Master-Key':JSONBIN_API_KEY}, body:JSON.stringify(sessionData)});
  if(!response.ok) throw new Error('Failed to update session');
  return await response.json();
}

joinSessionBtn.addEventListener('click', async()=>{
  const sessionID=document.getElementById('sessionID').value.trim();
  const name=document.getElementById('participantName').value.trim();
  const number=document.getElementById('participantNumber').value.trim();
  if(!sessionID||!name||!number){document.getElementById('participantMessage').textContent="Please fill all fields"; return;}
  try{ showLoading(true);
    const response=await fetch(`${JSONBIN_BASE_URL}/${sessionID}`,{headers:{'X-Master-Key':JSONBIN_API_KEY}});
    if(!response.ok){document.getElementById('participantMessage').textContent="Invalid session ID"; return;}
    const data=await response.json(); const session=data.record;
    if(Date.now()>session.expiry){document.getElementById('participantMessage').textContent="Session has expired"; return;}
    if(session.participants.length>=session.maxParticipants){document.getElementById('participantMessage').textContent="Session is full"; return;}
    if(!number.startsWith('+')||number.length<8){document.getElementById('participantMessage').textContent="Invalid phone number format"; return;}
    session.participants.push({name,number});
    await updateSession(sessionID,session);
    document.getElementById('participantMessage').textContent=`Thanks ${name}, your contact is saved!`;
    document.getElementById('participantName').value=''; document.getElementById('participantNumber').value='';
    if(session.groupLink) groupLinkBtn.href=session.groupLink;
    updateProgress(session);
    if(shareSection.style.display==='none'){shareSection.style.display='block'; shareLink.textContent=window.location.href.split('?')[0]+'?session='+sessionID;}
  } catch(e){document.getElementById('participantMessage').textContent="Error saving contact. Try again."; console.error(e);}
  finally{showLoading(false);}
});

shareLink.addEventListener('click',function(){const temp=document.createElement('textarea'); temp.value=this.textContent; document.body.appendChild(temp); temp.select(); document.execCommand('copy'); document.body.removeChild(temp); const original=this.textContent; this.textContent='Copied!'; setTimeout(()=>{this.textContent=original;},2000);});

function showLoading(loading){if(loading){joinSessionBtn.classList.add('loading'); joinSessionBtn.textContent='Uploading...';}else{joinSessionBtn.classList.remove('loading'); joinSessionBtn.textContent='Upload Contact';}}
</script>

</body>
</html>
